services:
  court-booking-api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: court-booking-webapp
    environment:
      GOOGLE_FORM_SUBMIT_URL: ${GOOGLE_FORM_SUBMIT_URL}

      BOOKING_NAME: ${BOOKING_NAME}
      BOOKING_PHONE: ${BOOKING_PHONE}
      BOOKING_EMAIL: ${BOOKING_EMAIL}
      BOOKING_STUDENT_CODE: ${BOOKING_STUDENT_CODE}
      BOOKING_DEPARTMENT: ${BOOKING_DEPARTMENT}
      BOOKING_FACULTY: ${BOOKING_FACULTY}
      BOOKING_YEAR_OF_STUDY: ${BOOKING_YEAR_OF_STUDY}
      BOOKING_DEGREE: ${BOOKING_DEGREE}
      BOOKING_TYPE_OF_CLIENT: ${BOOKING_TYPE_OF_CLIENT}

      RESEND_API_KEY: ${RESEND_API_KEY}
      RESEND_FROM_EMAIL: ${RESEND_FROM_EMAIL}
      CONFIRMATION_EMAIL: ${CONFIRMATION_EMAIL}

      SERVER_HOST: 0.0.0.0
      SERVER_PORT: 3000
      SERVER_DEBUG: "false"

    restart: unless-stopped

    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/api/courts"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
